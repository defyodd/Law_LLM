

```mermaid
mindmap
  root((🌈 智能法律助手 Agent))
    🌟 功能
      🤖 法律法规问答
      📄 文书合同生成
      📚 判例推荐
      🧑‍💼 本地律师推荐
      ⏰ 法条时效提醒
      🌐 地域/行业适配
    🏗️ 架构
      📝 用户输入
      🧠 Agent主流程
      🗂️ FAISS检索
      🤖 LLM生成
      💡 业务增强
    🎯 典型场景
      👷‍♂️ 劳动纠纷
      📑 合同违约
      👪 婚姻家庭
      🏡 房地产
```
# Agent架构
---

1. 📝 **用户问题**  
   用户通过命令行或界面输入自己的法律问题。

2. 🔍 **模糊检查（Clarity Check）**  
   系统首先判断问题是否表达清晰，必要时会引导用户补充信息。

3. 🧠 **历史对话记忆（Conversation Memory）**  
   调用对话记忆，结合上下文理解用户意图，支持多轮连续咨询。

4. 🗂️ **问题类型分类与分发（Dispatcher）**  
   系统自动识别问题类型（如法律咨询、合同生成、判例查询等），并分派到对应的处理流程。

5. 📚 **知识检索（FAISS / Internet）**  
   针对具体问题，调用本地法律知识库或外部互联网进行智能检索，获取相关法条/知识。

6. 🤖 **初步答案生成（DeepSeek LLM）**  
   基于检索结果和用户问题，由大语言模型生成严谨的法律答复或文书草稿。

7. ✅ **自我反馈评估（Self-Feedback）**  
   系统自查答案的完整性和准确性，必要时自动补充或提醒用户。

8. 💬 **输出最终答案（Response）**  
   以结构化形式将答案、建议、相关法条/案例、推荐律师等输出给用户。

9. 📝 **日志记录（Logging）**  
   自动保存每一次问答、用户上下文及处理结果，便于后续追溯和数据分析。


---



# 智能法律助手 Agent 核心功能

1. 🤖 **法律法规检索与智能问答**  
   - 基于本地知识库和大模型，准确回答各类法律问题，提供权威法条和解析。

2. 📄 **文书/合同自动生成**  
   - 一键生成各类法律文书草稿，如合同、起诉状、授权书等，规范专业。

3. 📚 **判例（案例法）推荐**  
   - 智能检索并推荐真实案例，辅助理解法律适用和裁判趋势。

4. 🧑‍💼 **本地律师与专业机构推荐**  
   - 根据地域和专业领域，智能推荐优质本地律师及律所资源。

5. ⏰ **法规时效性检测与提示**  
   - 自动识别已废止或被新法替代的法条，及时提示用户避免引用失效法规。

6. 🌐 **地域/行业法规适配**  
   - 针对地区、行业等特定场景，优先输出适用法规和政策。

7. 📊 **置信度评估与辅助建议**  
   - 动态评估回答可信度，并给出专业建议与后续行动指引。

8. 💬 **上下文对话与多轮追问支持**  
   - 支持连续追问与多轮上下文记忆，保证交互自然流畅、信息完整。


---

## 模块设计说明

### 1. 法律知识库管理

- **FAISS向量检索**：支持本地海量法律条文/法规的语义化检索。
- **索引自动检测/构建**：系统首次运行自动检测索引文件，无则自动构建。
- **可扩展：** 支持案例库、行业法规库等自定义扩充。

### 2. LLM模型集成

- **DeepSeek大模型API对接**：统一由`OpenAI`类封装，对接`deepseek-chat`等主流大模型。
- **多角色交互**：支持系统消息、用户消息等多轮对话。

### 3. 智能法律问答

- **多类型问题自动分析**：如定义咨询、可行性咨询、程序咨询等。
- **关键词自动提取**：精准定位核心法律术语，增强检索效果。
- **置信度评估**：根据相似度自动量化答案可信度。

### 4. 法律文书合同生成

- **文书类型自动识别**：合同、协议、起诉状等自动触发文书生成。
- **大模型自适应生成草稿**：自动补充法律条款、格式规范，如缺关键信息自动提醒用户补充。
- **支持多场景扩展**：如委托书、承诺书等类型。

### 5. 判例推荐

- **常见法律问题自动关联判例库**，输出真实案件摘要，提升实用性和说服力。

### 6. 地域/行业法规适配

- **地域/行业自动识别**：如问题中含“北京”、“医疗”等，自动优先本地法规和行业规范。
- **可配置自定义列表**，支持多行业多区域扩展。

### 7. 本地律师推荐

- **多条件智能推荐**：地域+专业方向优先，退而求其次逻辑，确保用户获得最相关律师/机构信息。
- **可扩展为API、外部库对接**。

### 8. 法条时效性检测

- **自动判别法规有效性**：如法规已失效或被新法替代，自动高亮提示，避免误用废止条文。

### 9. 置信度与建议生成

- **根据检索相似度分级推荐建议**，如“高度相关建议直接引用”，“一般相关建议咨询律师”等。
- **特定问题类型提供个性化建议**，如程序型问题引导用户咨询相关部门。

---

## 依赖安装

```bash
pip install openai langchain faiss-cpu sentence-transformers numpy pandas
```

## 快速体验

### 启动智能法律助手

```bash
python law_agent.py
```
根据提示输入法律问题，例如：

- 合同违约怎么办？
- 帮我生成房屋租赁合同模板
- 上海劳动争议推荐律师
- 婚姻继承判例有吗？
- 请查询最新劳动合同法解除条款

### 交互效果
🤖 智能法律助手 Agent 启动
=======================================
💡 我可以帮您：
   • 查找相关法律条文和案例
   • 生成合同、起诉状等法律文书
   • 解答法律问题并提供本地律师推荐

🗣️  请描述您的法律问题：合同违约怎么办？
...
# 代码调用示例
```bash
from law_agent import LawAgent

agent = LawAgent()
rsp = agent.answer("离婚财产如何分割？")
agent.print_answer(rsp)
```

## 常见问题与扩展

### 如何接入更多法条/案例/律师？
编辑数据源，重新构建索引即可，或扩展检索模块支持 API/数据库。

### 可以切换 LLM 或集成外部服务吗？
支持所有 OpenAI 兼容大模型，API 参数可灵活配置。

### 能否改为 Web/小程序接口？
只需包一层 Web API 或界面即可，核心 Agent 已适配多端调用。

---

## 典型测试用例

- "合同无效的后果是什么？"
- "离婚时财产如何分割？"
- "劳动仲裁流程是什么？"
- "北京劳动合同律师推荐"
- "有没有房屋买卖合同的判例？"


